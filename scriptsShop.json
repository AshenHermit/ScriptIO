{
    "scripts": [
    	"// template\n// simple script, does nothing.\nthis.disabled = false\n\nthis.init = function(player){\n    \n}\n\nthis.update = function(player){\n    \n}\n\nthis.draw = function(ctx, player){\n    \n}\n\nthis.destroy = function(player){\n    \n}",
    	"// player_info\n// set players name and info position.\n\nthis.init = function(player){\n    player.infoY = 90\n    player.username = \"hermit\"\n}",
    	"// hp_bar\n// hp bar rendering.\nthis.disabled = false\n\nthis.init = function(player){\n    player.hp = 100\n}\n\nthis.update = function(player){\n    \n}\n\nthis.draw = function(ctx, player){\n    ctx.fillStyle = \"#404040\"\n    ctx.fillRect(player.position.x - 80/2-2, player.position.y - player.infoY-2, 80+4, 8)\n    var w = player.hp * (80/100)\n    ctx.fillStyle = \"#ff4040\"\n    ctx.fillRect(player.position.x - w/2, player.position.y - player.infoY, w, 4)\n}\n\nthis.destroy = function(player){\n    \n}",
    	"// username_display\n// username rendering.\nthis.init = function(player){\n    \n}\n\nthis.draw = function(ctx, player){\n    ctx.font = \"14px Arial\"\n    ctx.textAlign = \"center\"\n    ctx.fillStyle = \"#555\"\n    ctx.fillText(player.username, \n        player.position.x, \n        player.position.y - player.infoY - 6)\n}\n",
        "// platformer\n// basic platformer behavior.\nthis.init = function(player){\n    player.overrideMovement = true\n    player.velocity.y = 0\n    \n    this.speed = 4\n}\n\nthis.update = function(player){\n    if(player.isLocal()){\n        if(player.controls[\"KeyW\"] && player.isOnFloor){\n            player.velocity.y = -10\n        }\n        if(player.controls[\"KeyA\"]){\n            player.velocity.x-=this.speed\n        }\n        if(player.controls[\"KeyD\"]){\n            player.velocity.x+=this.speed\n        }\n        \n        player.velocity.x/=2\n        player.velocity.y+=0.5\n        player.isOnFloor = physicsStep(player.position, player.velocity, 4)\n        player.position._add(player.velocity)\n    }\n}\n\nthis.destroy = function(player){\n    player.overrideMovement = false\n}",
        "// ahegao_bomb\n// allows to throw random ahegao image.\n\nthis.images = [\n\"https://i.pinimg.com/736x/e5/a0/53/e5a0532545c48282c8b15d0b0ef74ff5.jpg\",\n\"https://i.pinimg.com/236x/83/ff/7c/83ff7ca8f68b1cb9b56759c41e5c15d4.jpg\",\n\"https://pbs.twimg.com/profile_images/1301883529106788355/9QyqnQBE_400x400.jpg\",\n\"https://steamuserimages-a.akamaihd.net/ugc/966474717666982025/2EABC44650177C256B758BB4A2E8F619333162B1/\",\n\"https://pm1.narvii.com/6994/99caaca0f39abd0f24d2dabb1024ee9d09718295r1-720-720v2_uhq.jpg\",\n]\n\nthis.images = this.images.map((x)=>{\n    var i = new Image()\n    i.src = x\n    return i\n})\n\nfunction Particle(player, images){\n    this.position = vector2()._set(player.position)\n    this.velocity = vector2(player.velocity.x*Math.random()*4, -Math.random()*8-4)\n    \n    this.rotation = (Math.random()*2-1)/10\n    this.angle = 0\n    \n    this.image = images[Math.floor(Math.random()*images.length)]\n    \n    this.update = function(player){\n        this.angle += this.rotation\n        this.position._add(this.velocity)\n        this.velocity.y+=0.4\n    }\n    \n    this.draw = function(ctx){\n        drawImage(ctx, this.image, this.position.x, this.position.y, this.angle, 64)\n    }\n}\n\nthis.particles = []\n\nthis.timer = 0\nthis.update = function(player){\n    //player.position._set(player.mousePos)\n    \n    if(player.onPress[\"Space\"]){\n        var count = 25\n        for(var i=0; i<count; i++)\n            this.particles.push(new Particle(player, this.images))\n            \n        setTimeout(()=>{this.particles.splice(0, count)}, 1000*2)\n    }\n    \n    for(var i=0; i<this.particles.length; i++){\n        this.particles[i].update(player)\n    }\n}\n\nthis.draw = function(ctx, player){\n    \n    for(var i=0; i<this.particles.length; i++){\n        this.particles[i].draw(ctx)\n    }\n}",
        "// gachi\n// gachi character.\nthis.disabled = false\n\n\nthis.attack = function(thisPlayer){\n    var dmg = 10\n    players.forEach((player)=>{\n        if(thisPlayer.uid!=player.uid){\n            let dist = player.position.sub(thisPlayer.position).magnitude()\n            if(dist<=80){\n                player.hp = Math.max(player.hp-dmg, 0)\n            }\n        }\n    })\n}\n\n\nthis.init = function(player){\n    this.texture = new Image()\n    this.texture.src = \"https://cdn131.picsart.com/297756968106211.png\"\n    this.mirrored = false\n    this.step = 0\n    this.animSpeed = 0.2\n    player.overrideRender = true\n}\n\nthis.update = function(player){\n    if(player.isLocal()){\n        if(player.isOnFloor)\n            this.step += Math.abs(player.velocity.x)*this.animSpeed/2\n    }else{\n        if(player.onPress[\"Space\"]){\n            this.attack(player)\n        }\n        this.step += Math.aabs(player.velocity.x)*this.animSpeed/2\n    }\n    \n    if(player.controls[\"KeyD\"]){\n        this.mirrored = false\n    }else if(player.controls[\"KeyA\"]){\n        this.mirrored = true\n    }\n}\n\nthis.draw = function(ctx, player){\n    drawImagePlus(ctx, this.texture,\n    player.position.x, player.position.y+Math.sin(this.step)*2,\n    Math.cos(this.step)/10,\n    64,\n    0, -38,\n    !this.mirrored, false)\n}\n\nthis.destroy = function(player){\n    player.overrideRender = false\n}"
    ]
}